#!/bin/bash

# Change user password
echo "Do you want to change your password (y/n)"
read USER_RESPONSE
if [ "$USER_RESPONSE" = "y" ] 
  then
    passwd
  else
    echo "Kay"
fi

# Make directories
cd ~/
mkdir git bin lib venv

# Upgrade and install packages
sudo apt-get update && sudo apt-get upgrade -y
sudo apt-get install -y zsh tmux emacs vim python3-pip python-pip python-mysqldb\
    xclip silversearcher-ag git build-essential gcc autojump libglu1

sudo pip3 install setuptools wheel virtualenv
sudo pip3 install gcalcli parsedatetime krill

# All the gits
cd ~/git

git_urls=(
  'https://github.com/okaysolutions/dotfiles.git'
  )

for var in "${git_urls[@]}"
  do
    git clone "${var}"
  done

# Install vundle for vim
git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim

#VENV Problematic Programs
venv_programs=(
  'rainbowstream'
  'hangups'
)

for var in "${venv_programs[@]}"
  do
    mkdir ~/venv/$var
    cd ~/venv/$var
    virtualenv venv
    source ./venv/bin/activate
    pip install $var
    deactivate
    ln -s ~/venv/$var/venv/bin/$var ~/bin/
  done

# Symbolic Links of configs
for x in `ls -A $HOME/git/dotfiles/configs`
  do
    if [ -a $HOME/$x ]
      then
        echo "Removing $x"
        rm -rf $HOME/$x
        ln -sf $HOME/git/dotfiles/configs/$x $HOME/
      else
        ln -sf $HOME/git/dotfiles/configs/$x $HOME/
    fi
  done

# Install Anaconda
echo "Do you want to install jupyter and anaconda (y/n)"
read USER_RESPONSE
if [ "$USER_RESPONSE" = "y" ] 
  then
    mkdir ~/tmp
    cd ~/tmp
    sudo pip3 install jupyter
    echo "Please paste anaconda sh url here https://www.continuum.io/downloads:"
    read DOWNLOAD
    wget -o anaconda.sh $DOWNLOAD
    bash anaconda.sh
  else
    echo "Kay"
fi


# Install oh-my-zsh
# I know, I know....
sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"

printf "export SHELL=/bin/zsh\nexec /bin/zsh -l" > .bashrc


